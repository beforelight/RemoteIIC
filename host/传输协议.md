# 数据包定义

一个包有以下组成

头|u8	+	长(不包括crc)|u16	+	cmd|u8	+	任意字符	+	crc8



## 头

0xaa



## cmd

```c
enum cmd_type{
    write_gpio = 0,
    read.....,
    write_i2c,
    read_i2c,
    write_spi,
    read_spi,
    transfer_spi,//全双工
    
    printf,//仅单片机向主机发送，且不需要响应
    
    //对于每个cmd的响应定义为cmd|1<<7
    reply = 1<<7,
}

```

## cmd对应的任意字符

如果没有特别说明都是1byte

gpio

> write+gpio?+val //无需响应
>
> read+gpio?
>
> re|read+val

iic

>write+iic?+addr+subaddr4byte+subaddrsize+datasize2byte+*data
>
>re|write+status4byte
>
>read+iic?+addr+subaddr4byte+subaddrsize2byte+datasize
>
>re|read+status4byte+*data

spi 自动处理使能

> write+spi?+datasize2byte+*data
>
> re|write+status4byte
>
> read+spi?+datasize2byte
>
> re|read+status4byte+*data
>
> transfer+spi?+datasize2byte+*txdata
>
> re|transfer+status4byte+*rxdata

printf

> cmd之后全是字符串







## 校验和

规定校验和一旦校验出错立马抛出异常



